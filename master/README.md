# PyMaster-21C852-0

## 1. 主体页面布局

### 1.1 布局

![img.png](asset/img.png)

### 1.2 布局说明

整个上位机布局可以分为三大部分：标题栏、功能选择区、功能区。标题栏展示上位机的名称以及提供窗口最小化、最大化以及关闭的功能；功能选择区提供对上位机功能的切换；功能区展示上位机功能的具体内容。

### 1.3 标题栏

标题栏由标题和按钮组成，左侧标题为“PyMaster-21C852-0”，右侧为窗口按钮，提供了最小化、最大化和关闭的功能。
![img_1.png](asset/img_1.png)

### 1.4 功能选择区

功能选择区提供了该上位机提供的功能，分为Master、通用控制台、参数设置、串口助手、时序测试、JAYKITS。
其中，Master为主界面，提供了三路电机的控制操作功能以及数据监测和数据可视化；通用控制台，实现单板控制（6路CPU），可以选择需要操作的CPU，主要用于进行调试；
参数设置主要配合通用控制台使用，用于设置控制器和电机参数；串口助手，用于进行串口测试，可以进行数据收发测试，配置需要发送的指令；
时序测试，用于进行时序测试，测试控制器通讯稳定性；JAYKITS，实用小工具区，一些方便调试的小工具。

![img.png](asset/img_2.png)

### 1.5 功能区

根据功能选择区的选择，提供不同的功能。

## 2. Master

Master区整体视图。
![img_7.png](asset/img_7.png)

### 2.1 数据检测区

控制器、电机运行时实时参数监测，分为3列，第一列为蝶阀电机1监测的实时数据，第二列为蝶阀电机2监测的实时数据，第三列为泵电机监测的实时数据。

其中

| 参数名称                      | 参数说明    | 参数名称                      | 参数说明     | 参数名称                     | 参数说明   |
|---------------------------|---------|---------------------------|----------|--------------------------|--------|
| V1-SA（Valve1 Set Angle）   | 阀1-设定角度 | V2-SA（Valve2 Set Angle）   | 阀2-设定角度  | P-SS(Pump Setting Speed) | 泵-设定转速 |
| V1-RA（Valve1 Real Angle）  | 阀1-实际角度 | V2-RA（Valve1 Real Angle）  | 阀1-实际角度  | P-RS（Valve1 Real Angle）  | 泵-实际转速 |
| V1-TA（Valve1 Temperature） | 阀1-温度   | V2-TA（Valve2 Temperature） | 阀2-温度    | P-T（Pump Temperature）    | 泵-温度   | 
| V1-Vdc（Valve1 Voltage）    | 阀1-母线电压 | V2-Vdc（Valve2 Voltage）    | 阀2-母线电压  | P-Vdc（Pump Voltage）      | 泵-母线电压 |
| V1-Idc（Valve1 Current）    | 阀1-母线电流 | V2-Idc（Valve2 Current）    | 阀2-母线电流  | P-Idc（Pump Current）      | 泵-母线电流 |
| V1-Ia（Valve1 A Phase）     | 阀1-A相电流 | V2-Ia（Valve2 A Phase）     | 阀2-A相电流  | P-Ia（Pump A Phase）       | 泵-A相电流 |
| V1-Ib（Valve1 B Phase）     | 阀1-B相电流 | V2-Ib（Valve2 B Phase）     | 阀2-Ib相电流 | P-B（Pump B Phase）        | 泵-B相电流 |
| V1-Ic（Valve1 C Phase）     | 阀1-C相电流 | V2-Ic（Valve2 C Phase）     | 阀2-C相电流  | P-Ic（Pump C Phase）       | 泵-C相电流 |

![img.png](asset/img_11.png)

> 注：电机未接时，各监测不为定值，随机波动
>

### 2.2 串口区

串口设置区域，实现串口选择、串口参数设置、串口打开、串口关闭

![img_1.png](asset/img_12.png)

串口选择：根据实际所接串口进行选择

打开：打开串口，点击后会切换为关闭。

刷新：先开上位机后接串口的情况需要先刷新串口列表

设置：根据项目需要配置串口波特率、数据位、校验位和停止位，最后点击确认退出

![img_8.png](asset/img_8.png)

串口状态：根据”打开“、”关闭“操作反馈串口开关状态。

> 注：串口区默认波特率：115200、数据位：8、校验位：奇校验（Odd）、停止位：1

### 2.3 控制台

三路点击控制区域，顶部为3路电机的使能按钮：蝶阀1关闭/启动、蝶阀2关闭/启动、电动泵启动/停止；中间部分为3路电机角度/速度控制：
蝶阀1角度设置运行、蝶阀2角度设置运行、电动泵速度设置运行；底部为功能按钮，实现上位机向控制器发送特定指令（用于测试）

![img_3.png](asset/img_3.png)

### 2.4 故障状态区

故障状态字实时监测。蝶阀1使能按钮打开后，阀1使能指示灯点亮，蝶阀2使能按钮打开后，阀2使能指示灯点亮，电动泵使能按钮打开后，泵使能指示灯点亮。

蝶阀1在运行期间驱动（阀1主驱动或阀1副驱动）指示灯点亮，阀2在运行期间驱动（阀2主驱动或阀2副驱动）指示灯点亮，电动泵在运行期间驱动（泵主驱动或泵副驱动）指示灯点亮。

![img_4.png](asset/img_4.png)

### 2.5 数据可视化区

数据可视化区，实现3路电机实时数据的可视化，顶部为功能按钮、底部为曲线展示区。

![img_5.png](asset/img_5.png)

曲线设置：选择需要显示的曲线，点击确认后，曲线展示区会显示相应的曲线，再次点击后关闭，再次点击曲线设置按钮，关闭曲线选择，数据曲线1默认显示V1-RA（阀1-实时角度）
数据曲线2默认显示V2-RA（阀2-实时角度），数据曲线3默认显示P-RA（泵-实时角度）

![img_9.png](asset/img_9.png)

重置绘图：曲线复位显示（查看绘制的所有曲线）

清除绘图：清除绘制的曲线，重新开始绘制

右键功能：

- View All：同重置绘图
- X axis：X轴设置
- Y axis：Y轴设置
- Mouse Model：修改左建功能，3 Button：左键移动， 1 Button：选中缩放
- Plot Options：其他一些设置
- Export：导出图片

- ![img_10.png](asset/img_10.png)

滚轮：缩放

### 2.6 自检响应区

自检响应区，串口打开后，上位机向控制器发送自检指令，控制器收到后，会向上位机反馈自检响应，自检响应区会显示相应的自检响应。

![img_6.png](asset/img_6.png)

## 3. 通用控制台

### 3.1 主体布局

![img.png](asset/img_13.png)

### 3.2 CPU选择区

CPU选择区，根据项目需要选择CPU型号，点击确认后，CPU型号会显示在CPU型号区

![img_1.png](asset/img_14.png)

### 3.3 控制台

![img_2.png](asset/img_15.png)

### 3.4 锁定对零

![img_3.png](asset/img_16.png)

### 3.5 数据监测

![img_4.png](asset/img_17.png)

### 3.6 故障监测

![img_5.png](asset/img_18.png)

### 3.7 数据可视化区

![img_6.png](asset/img_19.png)

## 4. 参数设置

### 4.1 主体布局

![img_7.png](asset/img_20.png)

### 4.2 电机参数

![img_8.png](asset/img_21.png)

### 4.3 控制参数

![img_9.png](asset/img_22.png)

### 4.4 模拟参数

![img_10.png](asset/img_23.png)

### 4.6 其他参数

![img_11.png](asset/img_24.png)

## 5. 串口助手

## 6. 时序测试

## 7. JAYKITS